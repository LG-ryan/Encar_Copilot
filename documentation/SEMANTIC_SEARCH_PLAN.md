# 시맨틱 검색 개선 계획

## 🔴 현재 문제점

### 검색 방식
- **키워드 매칭**: "연차는 언제 생기나요?" ✅
- **유사 질문**: "연차 생성 시기는?" ❌
- **자연어**: "휴가가 언제 생겨?" ❌

### 한계
1. 완벽한 질문 문장 필요
2. 유의어 인식 불가
3. 맥락 이해 불가
4. 복합 질문 처리 어려움

---

## 🟢 개선 방안

### 방법 1: 임베딩 기반 시맨틱 검색 (권장) ⭐
```
질문: "휴가가 언제 생겨?"
↓ 임베딩 변환
↓ 유사도 계산
매칭: "연차는 언제 생기나요?" (0.87 유사도)
```

**장점**:
- 자연어 질문 이해
- 유의어 자동 인식
- 맥락 이해
- 확장성 높음

**필요 기술**:
- OpenAI Embeddings API (유료)
- Sentence Transformers (무료, 로컬)
- ChromaDB / FAISS (벡터 DB)

### 방법 2: 마크다운 전체 검색 + GPT 답변
```
질문: "휴가가 언제 생겨?"
↓ MD 파일 전체 검색
↓ 관련 섹션 추출
↓ GPT로 답변 생성
```

**장점**:
- 가장 유연함
- 정확한 답변
- MD 파일만 있으면 됨

**단점**:
- API 비용 (OpenAI)
- 응답 시간 (3-5초)

### 방법 3: 하이브리드 (권장) ⭐⭐⭐
```
1단계: 키워드 검색 (빠름)
   ↓ 매칭 실패 시
2단계: 시맨틱 검색 (정확)
   ↓ 여전히 실패 시
3단계: MD 전체 검색 + GPT
```

**장점**:
- 속도 + 정확도 균형
- 비용 효율적
- 점진적 개선 가능

---

## 🎯 추천 솔루션

### Phase 1: 로컬 임베딩 (무료)
```python
# Sentence Transformers 사용
from sentence_transformers import SentenceTransformer
model = SentenceTransformer('jhgan/ko-sroberta-multitask')

# FAQ를 벡터로 변환하여 저장
# 질문이 들어오면 유사도 계산
```

**예상 효과**:
- "휴가가 언제 생겨?" → "연차는 언제 생기나요?" 매칭
- "컴퓨터 비번 까먹었어" → "비밀번호를 잊어버렸어요" 매칭
- "회의실 예약 방법" → "회의실은 어떻게 예약하나요?" 매칭

### Phase 2: MD 파일 통합 검색
```python
# 엔카생활가이드.md, IT가이드.md, 사업가이드.md
# 모든 MD 파일을 청크로 나누어 벡터화
# 질문 시 가장 관련있는 청크 찾아서 답변
```

### Phase 3: GPT 답변 생성 (선택)
```python
# 관련 청크를 찾은 후
# GPT에게 "이 내용을 바탕으로 답변해줘"
```

---

## 💡 구현 순서

1. **즉시 개선** (30분): 키워드 확장, 동의어 추가
2. **Phase 1** (2시간): 로컬 임베딩 적용
3. **Phase 2** (1시간): MD 파일 통합
4. **Phase 3** (선택): GPT 답변 생성

---

## 📦 필요 패키지

```bash
# Phase 1: 로컬 임베딩
pip install sentence-transformers
pip install faiss-cpu  # 벡터 검색

# Phase 2: MD 파일 처리
pip install langchain
pip install chromadb

# Phase 3: GPT (선택)
pip install openai
```

---

## 🎬 어떤 방식으로 진행할까요?

1. **빠른 개선**: 키워드만 확장 (10분)
2. **중간 개선**: 로컬 임베딩 적용 (Phase 1)
3. **완전 개선**: 전체 시스템 개편 (Phase 1+2+3)


