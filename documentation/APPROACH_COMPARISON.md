# 접근 방식 비교: FAQ vs GPT-like RAG

## 📊 현재 상황

### 데이터 소스
- **엔카생활가이드.pdf**: 회사 전체 가이드 문서
- **현재 방식**: 15개 수동 작성 FAQ

### 목표
더 포괄적이고 자연스러운 답변 제공

---

## 🔄 두 가지 접근 방식 비교

### 방식 1: 전통적 FAQ 방식 (현재)

#### 구조
```json
{
  "question": "연차는 언제 생기나요?",
  "answer": "입사일 기준으로 1년마다 15개가 발생해요.",
  "keywords": ["연차", "발생", "기준"]
}
```

#### 장점 ✅
1. **빠른 응답 속도** (< 0.5초)
   - 데이터베이스 검색만 필요
   - API 호출 불필요
   
2. **정확한 답변 보장**
   - 사전에 검증된 공식 답변
   - 일관성 있는 정보 제공
   
3. **비용 효율적**
   - 외부 API 비용 없음
   - 인프라 비용 최소화
   
4. **오프라인 작동 가능**
   - 네트워크 문제 시에도 작동
   - 캐싱 용이
   
5. **보안**
   - 민감한 정보 외부 유출 없음
   - 완전한 제어 가능

#### 단점 ❌
1. **제한된 범위**
   - FAQ에 없는 질문은 답변 불가
   - 수동으로 FAQ 추가 필요
   
2. **유연성 부족**
   - 질문 변형에 약함
   - 맥락 이해 어려움
   
3. **유지보수 부담**
   - FAQ 지속적 업데이트 필요
   - 키워드 튜닝 필요

---

### 방식 2: GPT-like RAG (Retrieval-Augmented Generation)

#### 구조
```
1. 엔카생활가이드.pdf → 벡터 임베딩
2. 사용자 질문 → 관련 문서 검색 (RAG)
3. 검색된 문서 + 질문 → GPT API
4. 자연스러운 답변 생성
```

#### 기술 스택
```python
# 문서 처리
- PDF Parser: PyPDF2, pdfplumber
- Text Chunking: LangChain
- Vector DB: ChromaDB, FAISS, Pinecone

# 임베딩
- OpenAI Embeddings API
- 또는 HuggingFace (무료, 한국어 지원)

# LLM
- OpenAI GPT-4 / GPT-3.5-turbo
- Claude (Anthropic)
- Gemini (Google)
```

#### 장점 ✅
1. **포괄적 답변**
   - 가이드 전체 내용 활용
   - 새로운 질문도 답변 가능
   
2. **자연스러운 대화**
   - 맥락 이해
   - 다양한 질문 형태 처리
   
3. **유지보수 용이**
   - PDF만 업데이트하면 자동 반영
   - FAQ 수동 작성 불필요
   
4. **지능적 추론**
   - 복잡한 질문 처리
   - 여러 정보 조합

#### 단점 ❌
1. **비용 발생**
   - OpenAI API: ~$0.002/1K tokens
   - 월 100명 × 10질문 = $20~50/월 예상
   
2. **응답 속도 느림**
   - API 호출: 2~5초
   - 목표 3초 달성 어려움
   
3. **정확도 보장 어려움**
   - Hallucination (환각) 가능성
   - 잘못된 정보 생성 위험
   
4. **외부 의존성**
   - API 장애 시 서비스 중단
   - 네트워크 필수
   
5. **보안/개인정보**
   - 데이터가 외부 서버로 전송
   - 기밀 정보 유출 위험

---

## 🎯 권장 접근 방식: 하이브리드 (Hybrid)

### 제안: 2단계 접근법

#### Phase 1: FAQ 우선 (Fast Path)
```
사용자 질문
    ↓
FAQ 매칭 (0.5초)
    ↓
신뢰도 > 70% ? → FAQ 답변 반환
```

#### Phase 2: RAG 보완 (Intelligent Path)
```
신뢰도 < 70% ?
    ↓
RAG 검색 (1초)
    ↓
GPT 답변 생성 (2~3초)
    ↓
"추정 답변입니다" 표시
```

### 구현 예시
```python
async def ask_question(question: str):
    start_time = time.time()
    
    # 1단계: FAQ 검색 (빠름)
    faq_result = search_engine.get_best_match(question, threshold=0.7)
    
    if faq_result and faq_result[1] >= 0.7:
        # 신뢰도 높음 → FAQ 답변 (< 1초)
        return AnswerResponse(
            answer=faq_result[0].main_answer,
            source="FAQ",
            confidence="high",
            response_time=time.time() - start_time
        )
    
    # 2단계: RAG + GPT (느리지만 포괄적)
    if ENABLE_GPT_FALLBACK:
        docs = vector_db.search(question, top_k=3)
        gpt_answer = await call_gpt_api(question, docs)
        
        return AnswerResponse(
            answer=gpt_answer,
            source="AI (추정)",
            confidence="medium",
            response_time=time.time() - start_time
        )
    
    # 3단계: 답변 없음
    return no_answer_response()
```

---

## 📈 단계적 도입 전략

### v1.0 (현재) - FAQ Only
- ✅ 15개 핵심 FAQ
- ✅ 빠른 응답 (< 1초)
- ✅ 검증된 정보

### v1.5 (1개월 후) - FAQ 확장
- 📄 엔카생활가이드.pdf → 50~100개 FAQ로 확장
- 🤖 자동 FAQ 추출 도구 개발
- 📊 사용자 질문 로그 분석 → FAQ 추가

### v2.0 (3개월 후) - 하이브리드
- 🔍 RAG 시스템 구축
- 🤖 GPT Fallback 추가
- 💰 비용 모니터링 (월 예산 설정)

### v3.0 (6개월 후) - Full AI
- 🧠 Fine-tuned 모델 (회사 데이터)
- 🎯 온디바이스 AI (비용 절감)
- 🔒 완전한 보안

---

## 💰 비용 분석

### FAQ 방식
```
비용: $0/월
응답 시간: 0.5초
정확도: 95% (FAQ 내)
커버리지: 제한적
```

### GPT-RAG 방식
```
OpenAI GPT-3.5-turbo:
- 입력: $0.0005/1K tokens
- 출력: $0.0015/1K tokens

예상 사용량 (월):
- 100명 × 10질문 × 30일 = 30,000 질문
- 평균 500 tokens/질문
- 비용: 30,000 × 0.0015 × 0.5 = $22.5/월

GPT-4 사용 시: ~$150/월
```

### 하이브리드 방식
```
FAQ 80% + GPT 20%
- 24,000 질문 → FAQ (무료)
- 6,000 질문 → GPT ($4.5/월)

총 비용: $5~10/월
```

---

## 🎯 최종 권장사항

### 즉시 적용 (v1.0 → v1.5)
1. **엔카생활가이드.pdf 분석**
   - 수동으로 50~100개 FAQ 추출
   - 카테고리별 구조화
   - 키워드 태깅

2. **FAQ 품질 개선**
   - 더 자연스러운 답변
   - 관련 링크 추가
   - 예시 포함

3. **검색 엔진 고도화**
   - 한국어 형태소 분석 (KoNLPy)
   - 동의어 사전 구축
   - 오타 교정

### 중기 계획 (v2.0)
1. **RAG 파일럿 테스트**
   - 10명 베타 테스터
   - A/B 테스트 (FAQ vs RAG)
   - 비용/정확도 측정

2. **조건부 GPT 활용**
   ```python
   if faq_confidence < 0.7:
       # FAQ에 없는 질문만 GPT 사용
       use_gpt_fallback()
   ```

3. **비용 통제**
   - 월 예산 $50 설정
   - 예산 초과 시 GPT 일시 중단
   - FAQ로 자동 폴백

---

## 🔍 엔카생활가이드.pdf 활용 방안

### 방법 1: 수동 FAQ 추출 (권장 - v1.5)
```
장점:
✅ 즉시 적용 가능
✅ 정확도 보장
✅ 비용 없음

방법:
1. PDF 읽고 주요 내용 파악
2. 자주 물을 만한 질문 50~100개 작성
3. 답변을 자연스럽게 재작성
4. JSON 형식으로 저장
```

### 방법 2: RAG 시스템 (중기 - v2.0)
```
장점:
✅ 모든 내용 활용
✅ 유지보수 쉬움
✅ 자연스러운 답변

방법:
1. PDF → 텍스트 추출
2. 청킹 (500-1000자 단위)
3. 벡터 임베딩
4. ChromaDB 저장
5. RAG + GPT 통합
```

### 방법 3: 하이브리드 (최종 - v3.0)
```
핵심 FAQ (30개) → 즉시 답변
일반 질문 (70%) → FAQ 검색
복잡한 질문 (30%) → RAG + GPT
```

---

## ✅ 결론 및 다음 단계

### 결론
**현재 단계에서는 FAQ 방식 유지 + 확장이 최선**

이유:
1. ✅ 빠른 응답 (목표 3초 달성)
2. ✅ 비용 없음
3. ✅ 정확도 보장
4. ✅ 보안 안전
5. ⚠️ GPT는 아직 비용/성능 대비 효과 불확실

### 다음 단계
1. **1주 내**: 엔카생활가이드.pdf 분석
2. **2주 내**: 50개 핵심 FAQ 추출 및 작성
3. **1개월 내**: FAQ 100개로 확장
4. **3개월 후**: RAG 파일럿 테스트 시작

### 의사결정 기준
```
FAQ 방식 유지 조건:
- FAQ로 80% 이상 질문 커버
- 평균 응답 시간 < 1초
- 피드백 긍정률 > 80%

GPT 도입 검토 조건:
- FAQ 커버리지 < 70%
- 복잡한 질문 증가
- 예산 확보 ($50/월)
```

---

## 📝 제안서

### 제안 1: 빠른 개선 (권장)
```
방식: FAQ 확장 (엔카생활가이드 기반)
기간: 2주
비용: $0
효과: 커버리지 15개 → 100개

작업:
1. PDF에서 주제별 FAQ 추출
2. 자연스러운 한국어로 재작성
3. 카테고리 세분화
4. 테스트 및 배포
```

### 제안 2: AI 도입 (중기)
```
방식: 하이브리드 (FAQ + RAG)
기간: 3개월
비용: $5~10/월
효과: 100% 질문 커버

작업:
1. RAG 시스템 구축
2. 벡터 DB 설정
3. GPT API 통합
4. A/B 테스트
5. 점진적 rollout
```

---

**작성자**: QA Engineer  
**날짜**: 2025-10-14  
**버전**: 1.0

**의사결정 필요**: 어떤 방식으로 진행할까요?


